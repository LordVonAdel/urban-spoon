<html>
  <head>
    <link href="style.css" rel="stylesheet">
    <style>
      #browserTable tr{
        border-bottom: solid 2px #bababa;
        background-color: #808080;
      }
      #browserTable tr:nth-child(even){
        background-color: #505050;
      }
      #browserTable tr:hover{
        background-color: #ffa500;
      }
      #browserTable{
        width: 100%;
        table-layout: fixed;
      }
    </style>
    <script src="/lib/jquery-3.2.1.min.js"></script>
    <title>Urban Spoon - Lobby Browser</title>
    <script>
      function refreshLobbies(){
        $.ajax({
          dataType: "json",
          url: "/lobbies",
          success: function(data){
            console.log(data);
            $("#browserTable").html("<tr><th>Name</th><th>Players</th><th>Connect</th></tr>");
            data.lobbies.forEach(function(lobby){
              var playername = $('#playername').val();
              $("#browserTable").append($("<tr><td>"+lobby.name+"</td><td>"+lobby.players+"/"+lobby.playersMax+"</td><td><a href='/?"+playername+"?"+lobby.name+"?1'>Connect</a></td></tr>"));
            });
          }
        });
      };
    </script>
  </head>
  <body onload="refreshLobbies();">
    <div class="panel" style="width: 1000px; padding-top: 30px">
      <h1 style="float: left; margin: 0">Lobby Browser</h1><span style="float: right; width: 500px">Playername: <input style="float: right" type="text" id="playername"></span>
      <br><br><br>
      <button onclick="refreshLobbies();">Refresh</button>
      <br><br>
      <table id="browserTable">
        <th>Lobby Name</th><th>Playernumber</th>
      </table>
    </div>
  </body>
</html>